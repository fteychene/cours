<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="preload" as="font" href="https://fteychene.github.io/learning-courses/fonts/vendor/jost/jost-v4-latin-regular.woff2" type="font/woff2" crossorigin>
  <link rel="preload" as="font" href="https://fteychene.github.io/learning-courses/fonts/vendor/jost/jost-v4-latin-700.woff2"  type="font/woff2" crossorigin>


<link rel="stylesheet" href="https://fteychene.github.io/learning-courses/main.css">



  
  
    
  

  
  
    
    
  
  
  
    
  
  
  
  
    
  
  
  


  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">


	


	

<title>Basic | fteychene-learning</title>
<meta name="description" content="Ansible - Basics">
<link rel="canonical" href="https://fteychene.github.io/learning-courses/ansible/basics/">










<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://fteychene.github.io/learning-courses/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Ansible",
            "item": "https://fteychene.github.io/learning-courses/ansible/"
          },
        
      
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  3 ,
            "name": "Basics",
            "item": "https://fteychene.github.io/learning-courses/ansible/basics/"
          },
        
      
    
  }
</script>






  <meta name="theme-color" content="#fff">
  <link rel="apple-touch-icon" sizes="180x180" href="https://fteychene.github.io/learning-courses/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://fteychene.github.io/learning-courses/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://fteychene.github.io/learning-courses/favicon-16x16.png">
  
    <link rel="manifest" href="https://fteychene.github.io/learning-courses/site.webmanifest" crossorigin>
  


  

</head>

  

<body class="docs single">
  
  
  
  
<div class="header-bar fixed-top"></div>
<header class="navbar fixed-top navbar-expand-md navbar-light">
	<div class="container">
		<input class="menu-btn order-0" type="checkbox" id="menu-btn">
		<label class="menu-icon d-md-none" for="menu-btn"><span class="navicon"></span></label>
		<a class="navbar-brand order-1 order-md-0 me-auto" href="https://fteychene.github.io/learning-courses/">fteychene-learning</a>
		<button id="mode" class="btn btn-link order-2 order-md-4" type="button" aria-label="Toggle mode">
			<span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
			<span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
		</button>
		<ul class="navbar-nav fork-me order-3 order-md-5">
			
				
					<li class="nav-item">
						<a class="nav-link" href="https://twitter.com/fteychene"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg><span class="ms-2 visually-hidden">Twitter</span></a>
					</li>
				
					<li class="nav-item">
						<a class="nav-link" href="https://github.com/fteychene/learning-courses"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a>
					</li>
				
			
		</ul>
		<div class="collapse navbar-collapse order-4 order-md-1">
			<ul class="navbar-nav main-nav me-auto order-5 order-md-2">
				
					
				
				
				
					
						<li class="nav-item">
							<a class="nav-link" href="https://fteychene.github.io/learning-courses/">Courses</a>
						</li>
					
				
			</ul>
			<div class="break order-6 d-md-none"></div>
			
				<form class="navbar-form flex-grow-1 order-7 order-md-3">
					<input id="userinput" class="form-control is-search" type="search" placeholder="Search docs..."
						aria-label="Search docs..." autocomplete="off">
					<div id="suggestions" class="shadow bg-white rounded"></div>
				</form>
			
		</div>
	</div>
</header>



  
<div class="wrap container" role="document">
  <div class="content">
    <div class="row flex-xl-nowrap">
	  
<div class="col-lg-5 col-xl-4 docs-sidebar">
	<nav class="docs-links" aria-label="Main navigation">
			
			
			
					<h3>Ansible</h3>
					<ul class="list-unstyled">
					                           
							<li><a class="docs-link" href="https://fteychene.github.io/learning-courses/ansible/introduction/">Ansible</a></li>
					                           
							<li><a class="docs-link active" href="https://fteychene.github.io/learning-courses/ansible/basics/">Basic</a></li>
					                           
							<li><a class="docs-link" href="https://fteychene.github.io/learning-courses/ansible/inventory/">Inventory</a></li>
					                           
							<li><a class="docs-link" href="https://fteychene.github.io/learning-courses/ansible/playbooks/">Playbooks</a></li>
					
					</ul>
			
			
	</nav>
</div>

	  
  
  <nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation">
  	<div class="page-links">
  			<h3>On this page</h3>
  			<nav id="TableOfContents">
  					<ul>
  							
  							<li><a href="https://fteychene.github.io/learning-courses/ansible/basics/#welcome-inventories">Welcome inventories</a></li>
  							
  							
  							<li><a href="https://fteychene.github.io/learning-courses/ansible/basics/#connection-user">Connection user</a></li>
  							
  							
  							<li><a href="https://fteychene.github.io/learning-courses/ansible/basics/#ad-hoc-commands">Ad-hoc commands</a></li>
  							
  							
  							<li><a href="https://fteychene.github.io/learning-courses/ansible/basics/#exercice">Exercice</a></li>
  							
  							
  					</ul>
  			</nav>
  	</div>
  </nav>
  

      <main class="docs-content col-lg-11 col-xl-9">
        <h1>Basic</h1>
        
        <h2 id="welcome-inventories">Welcome inventories</h2>
<p>Ansible works against multiple systems in your infrastructure at the same time. It does this by selecting portions of systems listed in Ansible’s inventory, which defaults to being saved in the location <code>/etc/ansible/hosts</code>. You can specify a different inventory file using the -i <path> option on the command line.</p>
<p>To work on your new configured VM, add it's ip to the ansible inventory file <code>/etc/ansible/hosts</code></p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#96b5b4;">echo</span><span> 192.168.0.2 &gt;&gt; /etc/ansible/hosts
</span></code></pre>
<p>By doing this you add your VM to the global inventory of ansible in the all group (if you don't have already some groupe configured in this file ...).</p>
<p>You can test the connection to your VM with the ansible command, using the <code>ping</code> module.</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">ansible</span><span> all</span><span style="color:#bf616a;"> -u</span><span> vagrant</span><span style="color:#bf616a;"> -m</span><span> ping 
</span></code></pre>
<p>The <code>-u</code> option define the suer to connect with on the VM.<br />
Th <code>-m</code> define the module to be executed on VMs from the all group</p>
<h2 id="connection-user">Connection user</h2>
<p>If you would like to access sudo mode, there are also flags to do that:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># as bruce
</span><span style="color:#bf616a;">$</span><span> ansible all</span><span style="color:#bf616a;"> -m</span><span> ping</span><span style="color:#bf616a;"> -u</span><span> bruce
</span><span style="color:#65737e;"># as bruce, sudoing to root
</span><span style="color:#bf616a;">$</span><span> ansible all</span><span style="color:#bf616a;"> -m</span><span> ping</span><span style="color:#bf616a;"> -u</span><span> bruce</span><span style="color:#bf616a;"> -b
</span><span style="color:#65737e;"># as bruce, sudoing to batman
</span><span style="color:#bf616a;">$</span><span> ansible all</span><span style="color:#bf616a;"> -m</span><span> ping</span><span style="color:#bf616a;"> -u</span><span> bruce</span><span style="color:#bf616a;"> -b --become-user</span><span> batman
</span></code></pre>
<p>(The sudo implementation is changeable in Ansible’s configuration file if you happen to want to use a sudo replacement. Flags passed to sudo (like -H) can also be set there.)</p>
<h2 id="ad-hoc-commands">Ad-hoc commands</h2>
<p>Now run a live command on all of your nodes:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> ansible all</span><span style="color:#bf616a;"> -u</span><span> vagrant</span><span style="color:#bf616a;"> -a </span><span>&quot;</span><span style="color:#a3be8c;">/bin/echo hello</span><span>&quot;
</span></code></pre>
<p>Congratulations! You’ve just contacted your nodes with Ansible.<br />
It’s soon going to be time to: </p>
<ul>
<li>read about some more real-world cases in Introduction To Ad-Hoc Commands</li>
<li>explore what you can do with different modules</li>
<li>learn about the Ansible Working With Playbooks language. Ansible is not just about running commands, it also has powerful configuration management and deployment features. </li>
</ul>
<p>There’s more to explore, but you already have a fully working infrastructure!</p>
<h2 id="exercice">Exercice</h2>
<p>Start multiple VMs and configure ansible to run <code>hostname</code> to all your VM with one command</p>

        
        
<div class="docs-navigation d-flex justify-content-between">
  
  
  
  
  
    
    
    
    
      
        
        
          
        
      
        
        
          
            
              
              <a href="https:&#x2F;&#x2F;fteychene.github.io&#x2F;learning-courses&#x2F;vagrant&#x2F;vagrantfile&#x2F;">
                <div class="card my-1">
                  <div class="card-body py-2">
                    &larr; Vagrantfile
                  </div>
                </div>
              </a>
            
            
            
          
        
      
        
        
          
        
      
        
        
          
        
      
        
        
          
        
      
        
        
          
        
      
    
  

  
  
  
  
  
    
    
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
  
</div>

      </main>
    </div>
  </div>
</div>


  
    
<footer class="footer text-muted">
	<div class="container">
		<div class="row">
			<div class="col-lg-8 order-last order-lg-first">
				<ul class="list-inline">
					
						<li class="list-inline-item">Powered by <a href="https://github.com/">Github</a>, <a href="https://www.getzola.org/">Zola</a>, and <a href="https://github.com/aaranxu/adidoks">AdiDoks</a></li>
					
				</ul>
			</div>
			<div class="col-lg-8 order-first order-lg-last text-lg-end">
				<ul class="list-inline">
					
				</ul>
			</div>
		</div>
	</div>
</footer>

  

  
<script type="text/javascript" src="https://fteychene.github.io/learning-courses/js/main.js" defer></script>

  <script type="text/javascript" src="https://fteychene.github.io/learning-courses/plugins/elasticlunr.min.js" defer></script>
  <script type="text/javascript" src="https://fteychene.github.io/learning-courses/search_index.en.js" defer></script>
  <script type="text/javascript" src="https://fteychene.github.io/learning-courses/js/search.js" defer></script>

  
</body>
</html>
